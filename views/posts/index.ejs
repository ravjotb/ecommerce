<% layout('layouts/boilerplate') -%>

<h1> Posts Index </h1>
<div class="container-fluid">
  <div class="row">
    <div class="col-4">
      <%- include('../partials/searchFilter') %>
    </div>
    <div class="col-8">
      <div id="map"></div>
    </div>
  </div>
</div>
<%- include('../partials/paginate') %>

<% posts.docs.forEach(function(post){ %>

  <div class="">
    <h2><%= post.title %></h2>
    <div>Price: <%= post.price %> </div>
    <div class=""><%= post.description %></div>
    <div class=""><%= post.location %></div>
    <div class=""><a href="/posts/<%=post.id%>">View More</a></div>
  </div>
<%}); %>

<%- include('../partials/paginate') %>
<script>
  mapboxgl.accessToken= "<%= mapBoxToken %>";
  var posts= {features: <%- JSON.stringify(posts.docs) %>};
</script>
<script src="/javascripts/allPostsClusterMap.js"></script>
